"use strict";(self.webpackChunktest_ng4=self.webpackChunktest_ng4||[]).push([[634],{34634:(O,b,r)=>{r.r(b),r.d(b,{SearchModule:()=>M});var u=r(36895),n=r(24006),C=r(70585),h=r(35593),m=r(34793),i=r(94650),g=r(72164);function y(l,f){if(1&l&&(i.\u0275\u0275elementStart(0,"option",13),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&l){const o=f.$implicit;i.\u0275\u0275propertyInterpolate("value",o),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",o,"")}}function v(l,f){if(1&l&&(i.\u0275\u0275elementStart(0,"option",13),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&l){const o=f.$implicit;i.\u0275\u0275propertyInterpolate("value",o),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",o,"")}}const _=[{path:"",component:(()=>{class l{constructor(o,d,t){this.route=o,this.router=d,this.datastoreService=t,this.isEdit=!1,this.hasError=!1,this.hasResult=!1,this.apiCallLoading=!1,this.productsDetailArray=[],this.brands=["Gecko"],this.productsCode=["ZMSI"],this.criteria={},this.savedCriteria={},this.departureObjectParam={},this.departureObject={},this.notification=""}ngOnInit(){}saveAccounts(){this.departureObjectParam={tripCode:this.departureObject.tripCode,userCode:"dummyUserCode",productCode:this.departureObject.productCode,startingDate:this.departureObject.startingDate,endingDate:this.departureObject.startingDate,numberOfPax:this.departureObject.numberOfPax,accounts:this.productsDetailArray}}saveRow(o){o.saved=!0}editRow(o){o.saved=!1}removeRow(o){this.productsDetailArray.pop()}addNewRow(){this.productsDetailArray.push({})}searchByCriteria(o){this.validationResult=this.isSearchCriteriaValid(o),this.validationResult.isValid?(this.apiCallLoading=!0,this.getJsonData(o)):(this.notification=this.validationResult.message,this.hasError=!0,this.hasResult=!1,this.apiCallLoading=!1)}isSearchCriteriaValid(o){return o.startingDate?o.productCode?o.brand?o.numberOfPax?{isValid:!0,message:""}:{isValid:!1,message:"Number of pax is required"}:{isValid:!1,message:"Code is required"}:{isValid:!1,message:"Product code is required"}:{isValid:!1,message:"Starting date is required"}}getJsonData(o){this.savedCriteria=o,this.departureObject=o,this.datastoreService.getExpensesByCriteria(o).subscribe(d=>{localStorage.setItem("departure",JSON.stringify(this.productServiceViewTranslation(d))),this.hasResult=!0,this.hasError=!1,this.apiCallLoading=!1,this.router.navigate(["/myaccounts/","creation"])})}productServiceViewTranslation(o){let d=[];return o.accounts.forEach(t=>{d.push({dayNumber:t.dayNumber,date:t.date,description:t.description,budgetCurrency:t.budgetCurrency,budgetAmount:t.budgetAmount,actualCurrency:t.actualCurrency,actualAmount:t.actualAmount,affectedBudget:t.affectedBudget,budgetVariance:(parseFloat(t.budgetAmount)-parseFloat(t.actualAmount)).toFixed(2),comment:t.comment,expenseCategory:t.expenseCategory,paymentType:t.paymentType,cashBalance:t.cashBalance,altUserCodeID:t.altUserCode,altTripCodeID:t.altTripCode})}),o.accounts=d,o}static#e=this.\u0275fac=function(d){return new(d||l)(i.\u0275\u0275directiveInject(m.gz),i.\u0275\u0275directiveInject(m.F0),i.\u0275\u0275directiveInject(g.Mi))};static#t=this.\u0275cmp=i.\u0275\u0275defineComponent({type:l,selectors:[["app-search"]],decls:30,vars:7,consts:[["id","wrap",1,""],["id","wrapper",1,"searchPanel","col-md-6","offset-md-3",2,"border","solid 1px #eeeeef","border-radius","10px","padding","16px"],[1,"row"],[1,"col-md-12"],[1,"col-md-6"],[1,"form-group"],["dateFormat","dd/mm/yy",3,"ngModel","showIcon","ngModelChange"],["name","productReference",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","brand",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","numberOfPax","placeholder","Enter number of pax",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-md","btn-primary",2,"width","100%",3,"click"],[3,"value"]],template:function(d,t){1&d&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"p-calendar",6),i.\u0275\u0275listener("ngModelChange",function(e){return t.criteria.startingDate=e}),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(8,"div",4)(9,"div",5)(10,"select",7),i.\u0275\u0275listener("ngModelChange",function(e){return t.criteria.productCode=e}),i.\u0275\u0275elementStart(11,"option",8),i.\u0275\u0275text(12,"Choose a product reference"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,y,2,2,"option",9),i.\u0275\u0275elementEnd()()()()()(),i.\u0275\u0275elementStart(14,"div",2)(15,"div",3)(16,"div",2)(17,"div",4)(18,"div",5)(19,"select",10),i.\u0275\u0275listener("ngModelChange",function(e){return t.criteria.brand=e}),i.\u0275\u0275elementStart(20,"option",8),i.\u0275\u0275text(21,"Choose a brand name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(22,v,2,2,"option",9),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(23,"div",4)(24,"div",5)(25,"input",11),i.\u0275\u0275listener("ngModelChange",function(e){return t.criteria.numberOfPax=e}),i.\u0275\u0275elementEnd()()()()()(),i.\u0275\u0275elementStart(26,"div",2)(27,"div",3)(28,"a",12),i.\u0275\u0275listener("click",function(){return t.searchByCriteria(t.criteria)}),i.\u0275\u0275text(29," Generate "),i.\u0275\u0275elementEnd()()()()()),2&d&&(i.\u0275\u0275advance(7),i.\u0275\u0275property("ngModel",t.criteria.startingDate)("showIcon",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.criteria.productCode),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",t.productsCode),i.\u0275\u0275advance(6),i.\u0275\u0275property("ngModel",t.criteria.brand),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",t.brands),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.criteria.numberOfPax))},dependencies:[u.NgForOf,n.NgSelectOption,n.\u0275NgSelectMultipleOption,n.DefaultValueAccessor,n.NumberValueAccessor,n.SelectControlValueAccessor,n.NgControlStatus,n.NgModel,C.f]})}return l})()}];let E=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275mod=i.\u0275\u0275defineNgModule({type:l});static#n=this.\u0275inj=i.\u0275\u0275defineInjector({imports:[m.Bz.forChild(_),m.Bz]})}return l})(),M=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275mod=i.\u0275\u0275defineNgModule({type:l});static#n=this.\u0275inj=i.\u0275\u0275defineInjector({providers:[g.Mi,g.ez],imports:[u.CommonModule,n.FormsModule,E,C._8,h.hJ]})}return l})()},35593:(O,b,r)=>{r.d(b,{Hq:()=>f,hJ:()=>d,zx:()=>o});var u=r(36895),n=r(94650),C=r(10805),h=r(19592),m=r(91795),i=r(60982);function g(t,s){1&t&&n.\u0275\u0275elementContainer(0)}const y=function(t,s,e,a){return{"p-button-icon":!0,"p-button-icon-left":t,"p-button-icon-right":s,"p-button-icon-top":e,"p-button-icon-bottom":a}};function v(t,s){if(1&t&&n.\u0275\u0275element(0,"span",4),2&t){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction4(4,y,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),n.\u0275\u0275attribute("aria-hidden",!0)}}function S(t,s){if(1&t&&(n.\u0275\u0275elementStart(0,"span",5),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t){const e=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("aria-hidden",e.icon&&!e.label),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.label)}}function _(t,s){if(1&t&&(n.\u0275\u0275elementStart(0,"span",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(e.badgeClass),n.\u0275\u0275property("ngClass",e.badgeStyleClass()),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.badge)}}const E=function(t,s,e,a,c){return{"p-button p-component":!0,"p-button-icon-only":t,"p-button-vertical":s,"p-disabled":e,"p-button-loading":a,"p-button-loading-label-only":c}},M=["*"],l={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"};let f=(()=>{class t{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1,this._internalClasses=Object.values(l)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get htmlElement(){return this.el.nativeElement}ngAfterViewInit(){h.p.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){const e=[l.button,l.component];return this.icon&&!this.label&&i.gb.isEmpty(this.htmlElement.textContent)&&e.push(l.iconOnly),this.loading&&(e.push(l.disabled,l.loading),!this.icon&&this.label&&e.push(l.labelOnly)),e}setStyleClass(){const e=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...e)}createLabel(){if(this.label){let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",e.appendChild(document.createTextNode(this.label)),this.htmlElement.appendChild(e)}}createIcon(){if(this.icon||this.loading){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let a=this.label?"p-button-icon-"+this.iconPos:null;a&&h.p.addClass(e,a);let c=this.getIconClass();c&&h.p.addMultipleClasses(e,c),this.htmlElement.insertBefore(e,this.htmlElement.firstChild)}}updateLabel(){let e=h.p.findSingle(this.htmlElement,".p-button-label");this.label?e?e.textContent=this.label:this.createLabel():e&&this.htmlElement.removeChild(e)}updateIcon(){let e=h.p.findSingle(this.htmlElement,".p-button-icon");this.icon||this.loading?e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():e&&this.htmlElement.removeChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return t.\u0275fac=function(e){return new(e||t)(n.\u0275\u0275directiveInject(n.ElementRef))},t.\u0275dir=n.\u0275\u0275defineDirective({type:t,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),t})(),o=(()=>{class t{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new n.EventEmitter,this.onFocus=new n.EventEmitter,this.onBlur=new n.EventEmitter}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.\u0275\u0275defineComponent({type:t,selectors:[["p-button"]],contentQueries:function(e,a,c){if(1&e&&n.\u0275\u0275contentQuery(c,C.jx,4),2&e){let p;n.\u0275\u0275queryRefresh(p=n.\u0275\u0275loadQuery())&&(a.templates=p)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:M,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,a){1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"button",0),n.\u0275\u0275listener("click",function(p){return a.onClick.emit(p)})("focus",function(p){return a.onFocus.emit(p)})("blur",function(p){return a.onBlur.emit(p)}),n.\u0275\u0275projection(1),n.\u0275\u0275template(2,g,1,0,"ng-container",1),n.\u0275\u0275template(3,v,1,9,"span",2),n.\u0275\u0275template(4,S,2,2,"span",3),n.\u0275\u0275template(5,_,2,4,"span",2),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275classMap(a.styleClass),n.\u0275\u0275property("ngStyle",a.style)("disabled",a.disabled||a.loading)("ngClass",n.\u0275\u0275pureFunction5(11,E,a.icon&&!a.label,("top"===a.iconPos||"bottom"===a.iconPos)&&a.label,a.disabled||a.loading,a.loading,a.loading&&!a.icon&&a.label)),n.\u0275\u0275attribute("type",a.type)("aria-label",a.ariaLabel),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngTemplateOutlet",a.contentTemplate),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!a.contentTemplate&&(a.icon||a.loading)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!a.contentTemplate&&a.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!a.contentTemplate&&a.badge))},dependencies:[u.NgClass,u.NgIf,u.NgTemplateOutlet,u.NgStyle,m.H],encapsulation:2,changeDetection:0}),t})(),d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=n.\u0275\u0275defineInjector({imports:[u.CommonModule,m.T]}),t})()}}]);